// Generated by CoffeeScript 1.6.2
(function() {
  var Field, Model, Schema, controllers;

  Model = require("./model");

  Field = require("./field");

  controllers = require("./field/controllers");

  /*
  */


  Schema = (function() {
    /*
    */
    function Schema(definition, service) {
      this.service = service;
      this.field = new Field(definition);
      this._rootFieldController = controllers.initialize(this.field, this._createFieldController);
      this._rootFieldController = this.field.controller;
    }

    /*
    */


    Schema.prototype.model = function(data, options) {
      var m;

      if (data == null) {
        data = {};
      }
      if (options == null) {
        options = {};
      }
      m = new Model();
      this._rootFieldController.initializeModel(m, data, options);
      return m;
    };

    /*
    */


    Schema.prototype.collection = function(data, options) {
      if (data == null) {
        data = {};
      }
      if (options == null) {
        options = {};
      }
    };

    /*
    */


    Schema.prototype._createFieldController = function(field) {
      return new controllers.Transporter(field);
    };

    return Schema;

  })();

  module.exports = function(definition, service) {
    return new Schema(definition, service);
  };

}).call(this);
