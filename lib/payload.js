// Generated by CoffeeScript 1.6.2
(function() {
  var Payload, PayloadData;

  PayloadData = require("./payloadData");

  /*
   payload data persisted to the server
  */


  Payload = (function() {
    /*
    */
    function Payload(model, parent) {
      this.model = model;
      this.parent = parent;
      this.keys = this.model.flushChanged().map(function(changed) {
        return changed.key;
      }).filter(function(key) {
        return !!model.schema.fields.get(key);
      });
      this.isNew = this.model.isNew();
    }

    /*
    */


    Payload.prototype.child = function(model) {
      return new Payload(model, this);
    };

    /*
    */


    Payload.prototype.data = function(field) {
      return new PayloadData(this, field);
    };

    return Payload;

  })();

  module.exports = Payload;

}).call(this);
