// Generated by CoffeeScript 1.6.2
(function() {
  var Service, schema;

  schema = require("./schema");

  Service = (function() {
    /*
    */
    function Service() {
      this._schemas = {};
    }

    /*
     registers a new schema
    */


    Service.prototype.schema = function(name, definition) {
      return this._schemas[name] = schema(definition, name, this);
    };

    /*
    */


    Service.prototype.model = function(name, data, options) {
      return this._schema(name).model(data, options);
    };

    /*
    */


    Service.prototype.collection = function(name, options) {
      return this._schema(name).collection(options);
    };

    /*
    */


    Service.prototype._schema = function(name) {
      var s;

      if (!(s = this._schemas[name])) {
        throw new Error("schema \"" + name + "\" doesn't exist");
      }
      return s;
    };

    return Service;

  })();

  /*
  */


  module.exports = function() {
    return new Service();
  };

  module.exports.schema = schema;

}).call(this);
